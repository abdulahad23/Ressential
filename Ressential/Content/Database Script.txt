-- Table: Users
CREATE TABLE Users (
    UserId INT PRIMARY KEY IDENTITY(1,1),
    UserName NVARCHAR(100) NOT NULL,
    Email NVARCHAR(100) NOT NULL UNIQUE,
    Password NVARCHAR(255) NOT NULL,
    RoleId INT NOT NULL,
    ProfileImage NVARCHAR(max) NULL,
    IsActive BIT NOT NULL DEFAULT 1,
    HasWarehousePermission BIT NOT NULL DEFAULT 0,
    CreatedBy INT NULL,
    CreatedAt DATETIME2 NOT NULL DEFAULT GETDATE(),
    ModifiedBy INT NULL,
    ModifiedAt DATETIME2 NULL,
    FOREIGN KEY (ModifiedBy) REFERENCES Users(UserId),
    FOREIGN KEY (CreatedBy) REFERENCES Users(UserId),
);

-- Table: Roles
CREATE TABLE Roles (
    RoleId INT PRIMARY KEY IDENTITY(1,1),
    RoleName NVARCHAR(100) NOT NULL UNIQUE,
    IsBranchRole BIT NOT NULL DEFAULT 0,
    BranchId INT NULL,
    CreatedBy INT NULL,
    CreatedAt DATETIME2 NULL DEFAULT GETDATE(),
    ModifiedBy INT NULL,
    ModifiedAt DATETIME2 NULL,
    FOREIGN KEY (BranchId) REFERENCES Branches(BranchId),
    FOREIGN KEY (ModifiedBy) REFERENCES Users(UserId),
    FOREIGN KEY (CreatedBy) REFERENCES Users(UserId)
);

ALTER TABLE Users 
ADD CONSTRAINT FK_Users_Role FOREIGN KEY (RoleId) REFERENCES Roles(RoleId);

-- Table: PermissionsCategory
CREATE TABLE PermissionsCategory (
    PermissionCategoryId INT PRIMARY KEY IDENTITY(1,1),
    PermissionModule NVARCHAR(100) NOT NULL CHECK (PermissionModule IN ('Warehouse', 'Kitchen')),
    PermissionCategoryName NVARCHAR(100) NOT NULL UNIQUE,
);

-- Table: Branches
CREATE TABLE Branches (
    BranchId INT PRIMARY KEY IDENTITY(1,1),
    BranchName NVARCHAR(100) NOT NULL,
    BranchCode NVARCHAR(50) NOT NULL UNIQUE,
    BranchContact NVARCHAR(50) NOT NULL,
    Address NVARCHAR(255) NOT NULL,
    City NVARCHAR(100) NOT NULL,
    Country NVARCHAR(100) NOT NULL,
    PostalCode NVARCHAR(20) NULL,
    OwnerName NVARCHAR(100) NOT NULL,
    IsActive BIT NOT NULL DEFAULT 1,
    CreatedBy INT NOT NULL,
    CreatedAt DATETIME2 NOT NULL DEFAULT GETDATE(),
    ModifiedBy INT NULL,
    ModifiedAt DATETIME2 NULL,
    FOREIGN KEY (ModifiedBy) REFERENCES Users(UserId),
    FOREIGN KEY (CreatedBy) REFERENCES Users(UserId)

);

-- Table: UserBranchPermissions
CREATE TABLE UserBranchPermissions (
    UserBranchPermissionsId INT PRIMARY KEY IDENTITY(1,1),
    UserId INT NOT NULL,
    BranchId INT NOT NULL,
    FOREIGN KEY (BranchId) REFERENCES Branches(BranchId) ON DELETE CASCADE
);

-- Table: Permissions
CREATE TABLE Permissions (
    PermissionId INT PRIMARY KEY IDENTITY(1,1),
    PermissionName NVARCHAR(100) NOT NULL,
    PermissionCategoryId INT NOT NULL,
    FOREIGN KEY (PermissionCategoryId) REFERENCES PermissionsCategory(PermissionCategoryId),

);

-- Table: RolePermissions
CREATE TABLE RolePermissions (
    RolePermissionId INT PRIMARY KEY IDENTITY(1,1),
    RoleId INT NOT NULL,
    PermissionId INT NOT NULL,
    FOREIGN KEY (RoleId) REFERENCES Roles(RoleId) ON DELETE CASCADE,
    FOREIGN KEY (PermissionId) REFERENCES Permissions(PermissionId) ON DELETE CASCADE
);

-- Table: UnitOfMeasure
CREATE TABLE UnitOfMeasure (
    UnitOfMeasureId INT PRIMARY KEY IDENTITY(1,1),
    Name NVARCHAR(50) NOT NULL,
    Symbol NVARCHAR(10) NOT NULL
);

-- Table: ItemCategory
CREATE TABLE ItemCategory (
    ItemCategoryId INT PRIMARY KEY IDENTITY(1,1),
    ItemCategoryName NVARCHAR(100) NOT NULL,
    Description NVARCHAR(500) NULL
);

-- Table: Items
CREATE TABLE Items (
    ItemId INT PRIMARY KEY IDENTITY(1,1),
    ItemName NVARCHAR(100) NOT NULL,
    Sku NVARCHAR(50) NOT NULL UNIQUE,
    ItemCategoryId INT NOT NULL,
    UnitOfMeasureId INT NOT NULL,
    MinimumStockLevel DECIMAL(18,2) NOT NULL DEFAULT 0,
    IsActive BIT NOT NULL DEFAULT 1,
    CreatedBy INT NOT NULL,
    CreatedAt DATETIME2 NOT NULL DEFAULT GETDATE(),
    OpeningStockQuantity DECIMAL(18,2) NOT NULL,
    OpeningStockValue DECIMAL(18,2) NOT NULL,
    OpeningStockDate DATETIME2 NOT NULL,
    ModifiedBy INT NULL,
    ModifiedAt DATETIME2 NULL,
    FOREIGN KEY (ItemCategoryId) REFERENCES ItemCategory(ItemCategoryId),
    FOREIGN KEY (UnitOfMeasureId) REFERENCES UnitOfMeasure(UnitOfMeasureId),
    FOREIGN KEY (CreatedBy) REFERENCES Users(UserId),
    FOREIGN KEY (ModifiedBy) REFERENCES Users(UserId)
);

-- Table: WarehouseItemStock
CREATE TABLE WarehouseItemStock (
    ItemId INT PRIMARY KEY,
    Quantity DECIMAL(18,2) NOT NULL,
    CostPerUnit DECIMAL(18,2) NOT NULL,
    FOREIGN KEY (ItemId) REFERENCES Items(ItemId)
);

-- Table: Vendors
CREATE TABLE Vendors (
    VendorId INT PRIMARY KEY IDENTITY(1,1),
    Name NVARCHAR(100) NOT NULL,
    CompanyName NVARCHAR(100) NULL,
    Email NVARCHAR(100) NULL,
    Contact NVARCHAR(50) NULL,
    Address NVARCHAR(255) NULL,
    City NVARCHAR(100) NULL,
    Country NVARCHAR(100) NULL,
    PostalCode NVARCHAR(20) NULL,
    CreatedBy INT NOT NULL,
    CreatedAt DATETIME2 NOT NULL DEFAULT GETDATE(),
    ModifiedBy INT NULL,
    ModifiedAt DATETIME2 NULL,
    FOREIGN KEY (ModifiedBy) REFERENCES Users(UserId),
    FOREIGN KEY (CreatedBy) REFERENCES Users(UserId)
);


-- Table: BranchItems
CREATE TABLE BranchItems(
    BranchItemId INT PRIMARY KEY IDENTITY(1,1),
    ItemId INT NOT NULL,
    BranchId INT NOT NULL,
    MinimumStockLevel DECIMAL(18,2) NOT NULL DEFAULT 0,
    Quantity DECIMAL(18,2) NOT NULL,
    CostPerUnit DECIMAL(18,2) NOT NULL,
    OpeningStockQuantity DECIMAL(18,2) NOT NULL,
    OpeningStockValue DECIMAL(18,2) NOT NULL,
    OpeningStockDate DATETIME2 NOT NULL,
    IsActive BIT NOT NULL DEFAULT 1,
    CreatedBy INT NOT NULL,
    CreatedAt DATETIME2 NOT NULL DEFAULT GETDATE(),
    ModifiedBy INT NULL,
    ModifiedAt DATETIME2 NULL,
    FOREIGN KEY (ItemId) REFERENCES Items(ItemId),
    FOREIGN KEY (BranchId) REFERENCES Branches(BranchId),
    FOREIGN KEY (CreatedBy) REFERENCES Users(UserId),
    FOREIGN KEY (ModifiedBy) REFERENCES Users(UserId)
);

-- Table: Purchases
CREATE TABLE Purchases (
    PurchaseId INT PRIMARY KEY IDENTITY(1,1),
    PurchaseDate DATETIME2 NOT NULL,
    PurchaseNo NVARCHAR(50) NOT NULL UNIQUE,
    ReferenceNo NVARCHAR(50) NULL,
    VendorId INT NOT NULL,
    Memo NVARCHAR(255) NULL,
    Status NVARCHAR(20) NOT NULL CHECK (Status IN ('Paid', 'Not Paid', 'Partially Paid')),
    CreatedBy INT NOT NULL,
    CreatedAt DATETIME2 NOT NULL DEFAULT GETDATE(),
    ModifiedBy INT NULL,
    ModifiedAt DATETIME2 NULL,
    FOREIGN KEY (VendorId) REFERENCES Vendors(VendorId),
    FOREIGN KEY (CreatedBy) REFERENCES Users(UserId),
    FOREIGN KEY (ModifiedBy) REFERENCES Users(UserId)
);

-- Table: PurchaseDetails
CREATE TABLE PurchaseDetails (
    PurchaseDetailId INT PRIMARY KEY IDENTITY(1,1),
    PurchaseId INT NOT NULL,
    ItemId INT NOT NULL,
    Quantity DECIMAL(18,2) NOT NULL,
    UnitPrice DECIMAL(18,2) NOT NULL,
    Description NVARCHAR(255) NULL,
    FOREIGN KEY (PurchaseId) REFERENCES Purchases(PurchaseId) ON DELETE CASCADE,
    FOREIGN KEY (ItemId) REFERENCES Items(ItemId)
);

-- Table: Requisitions
CREATE TABLE Requisitions (
    RequisitionId INT PRIMARY KEY IDENTITY(1,1),
    RequisitionNo NVARCHAR(50) NOT NULL UNIQUE,
    RequisitionDate DATETIME2 NOT NULL,
    BranchId INT NOT NULL,
    Description NVARCHAR(255) NULL,
    Status NVARCHAR(20) NOT NULL CHECK (Status IN ('Pending', 'Settled', 'Partially Settled', 'Rejected')),
    CreatedBy INT NOT NULL,
    CreatedAt DATETIME2 NOT NULL DEFAULT GETDATE(),
    ModifiedBy INT NULL,
    ModifiedAt DATETIME2 NULL,
    FOREIGN KEY (BranchId) REFERENCES Branches(BranchId),
    FOREIGN KEY (CreatedBy) REFERENCES Users(UserId),
    FOREIGN KEY (ModifiedBy) REFERENCES Users(UserId)
);

-- Table: RequisitionDetails
CREATE TABLE RequisitionDetails (
    RequisitionDetailId INT PRIMARY KEY IDENTITY(1,1),
    RequisitionId INT NOT NULL,
    ItemId INT NOT NULL,
    Description NVARCHAR(255) NULL,
    Quantity DECIMAL(18,2) NOT NULL,
    FOREIGN KEY (RequisitionId) REFERENCES Requisitions(RequisitionId) ON DELETE CASCADE,
    FOREIGN KEY (ItemId) REFERENCES Items(ItemId)
);

-- Table: WarehouseIssues
CREATE TABLE WarehouseIssues (
    IssueId INT PRIMARY KEY IDENTITY(1,1),
    IssueDate DATETIME2 NOT NULL,
    IssueNo NVARCHAR(50) NOT NULL UNIQUE,
    ReferenceNo NVARCHAR(50) NULL,
    BranchID INT NOT NULL,
    RequisitionId INT NOT NULL,
    Memo NVARCHAR(255) NULL,
    Status NVARCHAR(20) NOT NULL CHECK (Status IN ('Pending', 'Settled')),
    CreatedBy INT NOT NULL,
    CreatedAt DATETIME2 NOT NULL DEFAULT GETDATE(),
    ModifiedBy INT NULL,
    ModifiedAt DATETIME2 NULL,
    FOREIGN KEY (RequisitionId) REFERENCES Requisitions(RequisitionId),
    FOREIGN KEY (BranchID) REFERENCES Branches(BranchId),
    FOREIGN KEY (CreatedBy) REFERENCES Users(UserId),
    FOREIGN KEY (ModifiedBy) REFERENCES Users(UserId)
);

-- Table: WarehouseIssueDetails
CREATE TABLE WarehouseIssueDetails (
    IssueDetailId INT PRIMARY KEY IDENTITY(1,1),
    IssueId INT NOT NULL,
    ItemId INT NOT NULL,
    Description NVARCHAR(255) NULL,
    Quantity DECIMAL(18,2) NOT NULL,
    CostApplied DECIMAL(18,2) NOT NULL,
    FOREIGN KEY (IssueId) REFERENCES WarehouseIssues(IssueId) ON DELETE CASCADE,
    FOREIGN KEY (ItemId) REFERENCES Items(ItemId)
);

-- Table: PurchaseReturn
CREATE TABLE PurchaseReturn (
    PurchaseReturnId INT PRIMARY KEY IDENTITY(1,1),
    PurchaseReturnDate DATETIME2 NOT NULL,
    PurchaseReturnNo NVARCHAR(50) NOT NULL UNIQUE,
    ReferenceNo NVARCHAR(50) NULL,
    VendorID INT NOT NULL,
    Memo NVARCHAR(255) NULL,
    Status NVARCHAR(20) NOT NULL CHECK (Status IN ('Received', 'Not Received', 'Partially Received')),
    CreatedBy INT NOT NULL,
    CreatedAt DATETIME2 NOT NULL DEFAULT GETDATE(),
    ModifiedBy INT NULL,
    ModifiedAt DATETIME2 NULL,
    FOREIGN KEY (VendorID) REFERENCES Vendors(VendorId),
    FOREIGN KEY (CreatedBy) REFERENCES Users(UserId),
    FOREIGN KEY (ModifiedBy) REFERENCES Users(UserId)
);

-- Table: PurchaseReturnDetails
CREATE TABLE PurchaseReturnDetails (
    PurchaseReturnDetailId INT PRIMARY KEY IDENTITY(1,1),
    PurchaseReturnId INT NOT NULL,
    ItemId INT NOT NULL,
    Quantity DECIMAL(18,2) NOT NULL,
    UnitPrice DECIMAL(18,2) NOT NULL,
    Description NVARCHAR(255) NULL,
    FOREIGN KEY (PurchaseReturnId) REFERENCES PurchaseReturn(PurchaseReturnId) ON DELETE CASCADE,
    FOREIGN KEY (ItemId) REFERENCES Items(ItemId)
);



-- Table: ReturnStock
CREATE TABLE ReturnStock (
    ReturnStockId INT PRIMARY KEY IDENTITY(1,1),
    ReturnDate DATETIME2 NOT NULL,
    ReturnNo NVARCHAR(50) NOT NULL UNIQUE,
    ReferenceNo NVARCHAR(50) NULL,
    BranchId INT NOT NULL,
    Description NVARCHAR(255) NULL,
    Status NVARCHAR(20) NOT NULL CHECK (Status IN ('Pending', 'Settled')),
    CreatedBy INT NOT NULL,
    CreatedAt DATETIME2 NOT NULL DEFAULT GETDATE(),
    ModifiedBy INT NULL,
    ModifiedAt DATETIME2 NULL,
    FOREIGN KEY (BranchId) REFERENCES Branches(BranchId),
    FOREIGN KEY (CreatedBy) REFERENCES Users(UserId),
    FOREIGN KEY (ModifiedBy) REFERENCES Users(UserId)
);

-- Table: ReturnStockDetails
CREATE TABLE ReturnStockDetails (
    ReturnStockDetailId INT PRIMARY KEY IDENTITY(1,1),
    ReturnStockId INT NOT NULL,
    ItemId INT NOT NULL,
    Description NVARCHAR(255) NULL,
    ItemQuantity DECIMAL(18,2) NOT NULL,
    CostPerUnit DECIMAL(18,2) NOT NULL,
    FOREIGN KEY (ReturnStockId) REFERENCES ReturnStock(ReturnStockId) ON DELETE CASCADE,
    FOREIGN KEY (ItemId) REFERENCES Items(ItemId)
);

-- Table: ConsumeItems
CREATE TABLE ConsumeItems (
    ConsumeItemId INT PRIMARY KEY IDENTITY(1,1),
    ConsumeItemDate DATETIME2 NOT NULL,
    ReferenceNo NVARCHAR(50) NOT NULL UNIQUE,
    BranchId INT NOT NULL,
    Description NVARCHAR(255) NULL,
    CreatedBy INT NOT NULL,
    CreatedAt DATETIME2 NOT NULL DEFAULT GETDATE(),
    ModifiedBy INT NULL,
    ModifiedAt DATETIME2 NULL,
    FOREIGN KEY (BranchId) REFERENCES Branches(BranchId),
    FOREIGN KEY (CreatedBy) REFERENCES Users(UserId),
    FOREIGN KEY (ModifiedBy) REFERENCES Users(UserId)
);

-- Table: ConsumeItemDetails
CREATE TABLE ConsumeItemDetails (
    ConsumeItemDetailId INT PRIMARY KEY IDENTITY(1,1),
    ConsumeItemId INT NOT NULL,
    ItemId INT NOT NULL,
    Description NVARCHAR(255) NULL,
    ItemQuantity DECIMAL(18,2) NOT NULL,
    CostPerUnit DECIMAL(18,2) NOT NULL,
    FOREIGN KEY (ConsumeItemId) REFERENCES ConsumeItems(ConsumeItemId) ON DELETE CASCADE,
    FOREIGN KEY (ItemId) REFERENCES Items(ItemId)
);

-- Table: WastageItems
CREATE TABLE WastageItems (
    WastageItemId INT PRIMARY KEY IDENTITY(1,1),
    WastageItemDate DATETIME2 NOT NULL,
    ReferenceNo NVARCHAR(50) NOT NULL UNIQUE,
    BranchId INT NOT NULL,
    Description NVARCHAR(255) NULL,
    CreatedBy INT NOT NULL,
    CreatedAt DATETIME2 NOT NULL DEFAULT GETDATE(),
    ModifiedBy INT NULL,
    ModifiedAt DATETIME2 NULL,
    FOREIGN KEY (BranchId) REFERENCES Branches(BranchId),
    FOREIGN KEY (CreatedBy) REFERENCES Users(UserId),
    FOREIGN KEY (ModifiedBy) REFERENCES Users(UserId)
);

-- Table: WastageItemDetails
CREATE TABLE WastageItemDetails (
    WastageItemDetailId INT PRIMARY KEY IDENTITY(1,1),
    WastageItemId INT NOT NULL,
    ItemId INT NOT NULL,
    Description NVARCHAR(255) NULL,
    ItemQuantity DECIMAL(18,2) NOT NULL,
    CostPerUnit DECIMAL(18,2) NOT NULL,
    FOREIGN KEY (WastageItemId) REFERENCES WastageItems(WastageItemId) ON DELETE CASCADE,
    FOREIGN KEY (ItemId) REFERENCES Items(ItemId)
);

-- Table: ProductCategories
CREATE TABLE ProductCategories (
    ProductCategoryId INT PRIMARY KEY IDENTITY(1,1),
    ProductCategoryName NVARCHAR(100) NOT NULL,
    Description NVARCHAR(255) NULL,
    CreatedBy INT NOT NULL,
    CreatedAt DATETIME2 NOT NULL DEFAULT GETDATE(),
    ModifiedBy INT NULL,
    ModifiedAt DATETIME2 NULL,
    FOREIGN KEY (CreatedBy) REFERENCES Users(UserId),
    FOREIGN KEY (ModifiedBy) REFERENCES Users(UserId)
);

-- Table: Products
CREATE TABLE Products (
    ProductId INT PRIMARY KEY IDENTITY(1,1),
    ProductCode NVARCHAR(50) NOT NULL UNIQUE,
    ProductName NVARCHAR(100) NOT NULL,
    BranchId INT NOT NULL,
    ProductImage NVARCHAR(max) NULL,
    ProductPrice DECIMAL(18,2) NOT NULL,
    Description NVARCHAR(255) NULL,
    ProductCategoryId INT NOT NULL,
    ChefID INT NULL,
    IsActive BIT NOT NULL DEFAULT 1,
    CreatedBy INT NOT NULL,
    CreatedAt DATETIME2 NOT NULL DEFAULT GETDATE(),
    ModifiedBy INT NULL,
    ModifiedAt DATETIME2 NULL,
    FOREIGN KEY (BranchId) REFERENCES Branches(BranchId),
    FOREIGN KEY (ProductCategoryId) REFERENCES ProductCategories(ProductCategoryId),
    FOREIGN KEY (CreatedBy) REFERENCES Users(UserId),
    FOREIGN KEY (ModifiedBy) REFERENCES Users(UserId)
);

-- Table: ProductItemDetails
CREATE TABLE ProductItemDetails (
    ProductItemDetailId INT PRIMARY KEY IDENTITY(1,1),    
    ProductId INT NOT NULL,
    ItemId INT NOT NULL,
    Description NVARCHAR(255) NULL,
    ItemQuantity DECIMAL(18,2) NOT NULL,
    FOREIGN KEY (ProductId) REFERENCES Products(ProductId) ON DELETE CASCADE,
    FOREIGN KEY (ItemId) REFERENCES Items(ItemId)
);

-- Table: Customers
CREATE TABLE Customers (
    CustomerId INT PRIMARY KEY IDENTITY(1,1),
    CustomerName NVARCHAR(100) NOT NULL,
    Email NVARCHAR(100) NOT NULL UNIQUE, 
    Password NVARCHAR(255) NOT NULL,
    ContactNo NVARCHAR(20) NOT NULL,
    Address NVARCHAR(255) NOT NULL,
    City NVARCHAR(255) NOT NULL,
    Country NVARCHAR(255) NOT NULL, 
    CreatedAt DATETIME2 NOT NULL DEFAULT GETDATE(),
);


-- Table: Orders
CREATE TABLE Orders (
    OrderId INT PRIMARY KEY IDENTITY(1,1),
    OrderDate DATETIME2 NOT NULL,
    OrderNo NVARCHAR(50) NOT NULL UNIQUE,
    OrderType NVARCHAR(20) NOT NULL CHECK (OrderType IN ('DineIn', 'TakeAway', 'Online')),
    TableNo NVARCHAR(10) NULL,
    BranchId INT NOT NULL,
    CustomerId INT NULL,
    PaymentMethod NVARCHAR(20) NOT NULL,
    OrderTotal Decimal NOT NULL,
    OrderTotalCost Decimal NOT NULL,
    Status NVARCHAR(20) NOT NULL CHECK (Status IN ('Pending', 'Preparing', 'Ready', 'Out for Delivery', 'Completed', 'Cancelled', 'Returned')),
    CreatedBy INT NULL,
    CreatedAt DATETIME2 NOT NULL DEFAULT GETDATE(),
    FOREIGN KEY (BranchId) REFERENCES Branches(BranchId),
    FOREIGN KEY (CustomerId) REFERENCES Customers(CustomerId),
    FOREIGN KEY (CreatedBy) REFERENCES Users(UserId)
);

-- Table: OrderDetails
CREATE TABLE OrderDetails (
    OrderDetailId INT PRIMARY KEY IDENTITY(1,1),
    OrderId INT NOT NULL,
    ProductId INT NOT NULL,
    ProductQuantity DECIMAL(18,2) NOT NULL,
    ProductPrice DECIMAL(18,2) NOT NULL,
    ProductCost DECIMAL(18,2) NOT NULL,
    FOREIGN KEY (OrderId) REFERENCES Orders(OrderId) ON DELETE CASCADE,
    FOREIGN KEY (ProductId) REFERENCES Products(ProductId)
);


-- Table: OnlineOrderDetails
CREATE TABLE OnlineOrderDetails (
    OnlineOrderDetailId INT PRIMARY KEY IDENTITY(1,1),
    OrderId INT NOT NULL,
    CustomerId INT NOT NULL,
    Address NVARCHAR(255) NULL,
    City NVARCHAR(255) NULL,
    Country NVARCHAR(255) NULL,
    ContactNo NVARCHAR(20) NOT NULL,
    DeliveryCharges INT NOT NULL,
    FOREIGN KEY (OrderId) REFERENCES Orders(OrderId) ON DELETE CASCADE,
);


-- Table: OrderReturns
CREATE TABLE OrderReturns (
    OrderReturnId INT PRIMARY KEY IDENTITY(1,1),
    OrderReturnDate DATETIME2 NOT NULL,
    OrderId INT NOT NULL,
    CreatedBy INT NOT NULL,
    CreatedAt DATETIME2 NOT NULL DEFAULT GETDATE(),
    FOREIGN KEY (OrderId) REFERENCES Orders(OrderId) ON DELETE CASCADE,
    FOREIGN KEY (CreatedBy) REFERENCES Users(UserId)
);

-- Table: OrderReturnDetails
CREATE TABLE OrderReturnDetails (
    OrderReturnDetailId INT PRIMARY KEY IDENTITY(1,1),
    OrderReturnId INT NOT NULL,
    ProductId INT NOT NULL,
    ProductQuantity DECIMAL(18,2) NOT NULL,
    FOREIGN KEY (OrderReturnId) REFERENCES OrderReturns(OrderReturnId) ON DELETE CASCADE,
    FOREIGN KEY (ProductId) REFERENCES Products(ProductId)
);

-- Table: Accounts
CREATE TABLE Accounts (
    AccountId INT PRIMARY KEY IDENTITY(1,1),
    AccountType NVARCHAR(20) NOT NULL CHECK (AccountType IN ('Bank', 'Cash')),
    AccountTitle NVARCHAR(100) NOT NULL,
    BankName NVARCHAR(100) NULL,
    AccountNumber NVARCHAR(50) NULL,
    Description NVARCHAR(255) NULL,
    CreatedBy INT NOT NULL,
    CreatedAt DATETIME2 NOT NULL DEFAULT GETDATE(),
    ModifiedBy INT NULL,
    ModifiedAt DATETIME2 NULL,
    FOREIGN KEY (CreatedBy) REFERENCES Users(UserId),
    FOREIGN KEY (ModifiedBy) REFERENCES Users(UserId)
);

-- Table: PaymentVouchers
CREATE TABLE PaymentVouchers (
    PaymentVoucherId INT PRIMARY KEY IDENTITY(1,1),
    PaymentVoucherNo NVARCHAR(50) NOT NULL UNIQUE,
    PaymentVoucherDate DATETIME2 NOT NULL,
    VendorId INT NOT NULL,
    AccountId INT NOT NULL,
    InstrumentNo NVARCHAR(50) NULL,
    InstrumentDate DATETIME2 NULL,
    Amount DECIMAL(18,2) NOT NULL,
    Status NVARCHAR(20) NOT NULL CHECK (Status IN ('Pending', 'Approved', 'Rejected')),
    CreatedBy INT NOT NULL,
    CreatedAt DATETIME2 NOT NULL DEFAULT GETDATE(),
    ModifiedBy INT NULL,
    ModifiedAt DATETIME2 NULL,
    FOREIGN KEY (VendorId) REFERENCES Vendors(VendorId),
    FOREIGN KEY (AccountId) REFERENCES Accounts(AccountId),
    FOREIGN KEY (CreatedBy) REFERENCES Users(UserId),
    FOREIGN KEY (ModifiedBy) REFERENCES Users(UserId)
);

-- Table: PaymentApply
CREATE TABLE PaymentApply (
    PaymentApplyId INT PRIMARY KEY IDENTITY(1,1),
    PaymentVoucherId INT NOT NULL,
    PurchaseId INT NOT NULL,
    AppliedAmount DECIMAL(18,2) NOT NULL,
    FOREIGN KEY (PaymentVoucherId) REFERENCES PaymentVouchers(PaymentVoucherId) ON DELETE CASCADE,
    FOREIGN KEY (PurchaseId) REFERENCES Purchases(PurchaseId)
);

-- Table: PaymentVoucherAttachments
CREATE TABLE PaymentVoucherAttachments (
    VoucherAttachmentId INT PRIMARY KEY IDENTITY(1,1),
    PaymentVoucherId INT NOT NULL,
    AttachmentPath NVARCHAR(255) NOT NULL,
    FOREIGN KEY (PaymentVoucherId) REFERENCES PaymentVouchers(PaymentVoucherId) ON DELETE CASCADE
);

-- Table: ReceiptVouchers
CREATE TABLE ReceiptVouchers (
    ReceiptVoucherId INT PRIMARY KEY IDENTITY(1,1),
    ReceiptVoucherNo NVARCHAR(50) NOT NULL UNIQUE,
    ReceiptVoucherDate DATETIME2 NOT NULL,
    VendorId INT NOT NULL,
    AccountId INT NOT NULL,
    InstrumentNo NVARCHAR(50) NULL,
    InstrumentDate DATETIME2 NULL,
    Amount DECIMAL(18,2) NOT NULL,
    Status NVARCHAR(20) NOT NULL CHECK (Status IN ('Pending', 'Approved', 'Rejected')),
    CreatedBy INT NOT NULL,
    CreatedAt DATETIME2 NOT NULL DEFAULT GETDATE(),
    ModifiedBy INT NULL,
    ModifiedAt DATETIME2 NULL,
    FOREIGN KEY (VendorId) REFERENCES Vendors(VendorId),
    FOREIGN KEY (AccountId) REFERENCES Accounts(AccountId),
    FOREIGN KEY (CreatedBy) REFERENCES Users(UserId),
    FOREIGN KEY (ModifiedBy) REFERENCES Users(UserId)
);

-- Table: ReceiptApply
CREATE TABLE ReceiptApply (
    ReceiptApplyId INT PRIMARY KEY IDENTITY(1,1),
    ReceiptVoucherId INT NOT NULL,
    PurchaseReturnId INT NOT NULL,
    AppliedAmount DECIMAL(18,2) NOT NULL,
    FOREIGN KEY (ReceiptVoucherId) REFERENCES ReceiptVouchers(ReceiptVoucherId) ON DELETE CASCADE,
    FOREIGN KEY (PurchaseReturnId) REFERENCES PurchaseReturn(PurchaseReturnId)
);

-- Table: ReceiptVoucherAttachments
CREATE TABLE ReceiptVoucherAttachments (
    VoucherAttachmentId INT PRIMARY KEY IDENTITY(1,1),
    ReceiptVoucherId INT NOT NULL,
    AttachmentPath NVARCHAR(255) NOT NULL,
    FOREIGN KEY (ReceiptVoucherId) REFERENCES ReceiptVouchers(ReceiptVoucherId) ON DELETE CASCADE
);

-- Create Country table
CREATE TABLE Country (
    CountryId INT PRIMARY KEY IDENTITY(1,1),
    CountryName NVARCHAR(100) NOT NULL
);

-- Create City table
CREATE TABLE City (
    CityId INT PRIMARY KEY IDENTITY(1,1),
    CityName NVARCHAR(100) NOT NULL,
    CountryId INT NOT NULL,
    FOREIGN KEY (CountryId) REFERENCES Country(CountryId)
);

-- Create Area table
CREATE TABLE Area (
    AreaId INT PRIMARY KEY IDENTITY(1,1),
    AreaName NVARCHAR(100) NOT NULL,
    CityId INT NOT NULL,
    FOREIGN KEY (CityId) REFERENCES City(CityId)
);

-- Create BranchArea table
CREATE TABLE BranchArea (
    BranchAreaId INT PRIMARY KEY IDENTITY(1,1),
    BranchId INT NOT NULL,
    AreaId INT NOT NULL,
    CreatedOn DATETIME NOT NULL DEFAULT GETDATE(),
    CreatedBy INT NOT NULL,
    FOREIGN KEY (BranchId) REFERENCES Branches(BranchId),
    FOREIGN KEY (AreaId) REFERENCES Area(AreaId),
    FOREIGN KEY (CreatedBy) REFERENCES Users(UserId)
);



INSERT INTO UnitOfMeasure (Name, Symbol)
VALUES ('Kilogram', 'kg'),
       ('Gram', 'g'),
       ('Liter', 'L'),
       ('Milliliter', 'ml'),
       ('Piece', 'pcs');

INSERT INTO ROLES (RoleName)
VALUES ('Super Admin');

INSERT INTO USERS (UserName, Email, Password, IsActive, RoleId)
VALUES ('Abdul Ahad', 'abdulahad.ad23@gmail.com', '123', 1, 1),
       ('Syeda Saba', 'syedha.sabaali@gmail.com', '123', 1, 1),
       ('Waniya Rana', 'waniyarana@gmail.com', '123', 1, 1),
       ('Abdul Basit', 'abdulbasit@gmail.com', '123', 1, 1);

INSERT INTO ITEMCATEGORY (ItemCategoryName, Description)
VALUES ('Meat', 'All type of meats'),
       ('Spices', 'All type of spices'),
       ('Oils', 'All type of oils'),
       ('Cold Drinks', 'All type of cold drinks');

INSERT INTO VENDORS (Name,CompanyName,Email,Contact,Address,City,Country,PostalCode,CreatedBy)
VALUES  ('Abdul Ahad','AD Store','abdulahad.ad23@gmail.com','03112824123','H-392, Sector 31/D, P&T CHS, Korangi','Karachi','Pakistan','74900',1),
        ('Muhammad Rashid','Rashid & Brothers','rashidbhai@gmail.com','03334323142','R-123, Block-J, Saadi Garden','Karachi','Pakistan','72244',2);

INSERT INTO ITEMS(ItemName,Sku,ItemCategoryId,UnitOfMeasureId, MinimumStockLevel, IsActive, CreatedBy, OpeningStockQuantity,OpeningStockValue,OpeningStockDate)
VALUES  ('Chicken Chest','CK-13452',1,1,10,1,1,44,9700,SYSDATETIME()),
        ('Beef','BF-11243',1,1,25,1,1,19,12700,SYSDATETIME()),
		('Pepsi 500ml','CD-00212',4,5,50,1,1,0,0,SYSDATETIME()),
		('Olive Oil','OL-14222',3,3,15,1,1,16,15890,SYSDATETIME()),
		('Black Pepper','SP-11678',2,1,5,1,1,2,300,SYSDATETIME());

INSERT INTO WAREHOUSEITEMSTOCK (ItemId,Quantity,CostPerUnit)
VALUES  (1,44,220.45),
        (2,19,668.42),
	(3,0,0),
	(4,16,993.13),
	(5,2,150);

INSERT INTO BRANCHES (BranchName, BranchCode, BranchContact, Address, City, Country, OwnerName, CreatedBy)
VALUES ('Tipu Sultan', '137256', '+923112824123', 'A-21, Street-3, Tipu Sultan Road', 'Karachi', 'Pakistan', 'Zulfiqar', 1),
       ('DHA Phase 6', '137257', '+923332765433', 'B-121, Street-8, DHA Phase 6', 'Karachi', 'Pakistan', 'Abdul Shakoor', 1),
       ('Landhi', '137258', '+923163033321', 'R-221, Street-4, Landhi No. 5', 'Karachi', 'Pakistan', 'Najma Begum', 1),
       ('Korangi', '137259', '+923452131241', 'B-76, Street-5, Korangi No. 6', 'Karachi', 'Pakistan', 'Syed Muhammad Ali', 1);

INSERT INTO BranchItems (ItemId, BranchId, Quantity, OpeningStockQuantity, OpeningStockValue, CostPerUnit, OpeningStockDate, MinimumStockLevel, IsActive, CreatedBy)
VALUES 
    (1, 1, 0, 0, 0, 0, SYSDATETIME(), 10, 1, 1),
    (2, 1, 0, 0, 0, 0, SYSDATETIME(), 15, 1, 1),
    (3, 1, 0, 0, 0, 0, SYSDATETIME(), 5, 1, 1),
    (4, 1, 0, 0, 0, 0, SYSDATETIME(), 20, 1, 1),
    (5, 1, 0, 0, 0, 0, SYSDATETIME(), 8, 1, 1);

INSERT INTO CUSTOMERS (CustomerName,Email,Password,ContactNo,Address,City,Country)
VALUES  ('Abdul Ahad','abdulahad.ad23@gmail.com','123','+923112824123','House # A-392, Sector 31/D, P&T Society, Korangi','Karachi','Pakistan');

INSERT INTO ProductCategories (ProductCategoryName, Description, CreatedBy)
VALUES 
('Pizza', 'A variety of pizzas with different toppings and crusts',1),
('Burger', 'Delicious burgers including beef, chicken, and veggie options',1),
('Sandwich', 'Fresh sandwiches with assorted fillings and bread choices',1),
('Pasta', 'Italian pasta dishes with sauces and add-ons',1),
('Salads', 'Healthy salads with fresh vegetables and toppings',1),
('Rolls', 'Chicken and Beef rolls',1),
('Desserts', 'Sweet dishes like cakes, ice creams, and pastries',1),
('Seafood', 'Dishes featuring fresh fish, shrimp, and other seafood',1),
('Grilled Items', 'Grilled chicken, steaks, and BBQ specialties',1),
('Desi', 'A variety of soups including vegetarian and non-vegetarian options',1);



INSERT INTO Products (ProductCode, ProductName, BranchId, ProductImage, ProductPrice, Description, ProductCategoryId, IsActive, CreatedBy)
VALUES
('P001', 'Margherita Pizza', 1, 'pizza.jpg', 899, 'Classic Italian pizza with mozzarella and basil', 1, 1, 1),
('P002', 'Pepperoni Pizza', 1, 'pepperoni.jpg', 899, 'Pizza topped with pepperoni and cheese', 1, 1, 1),
('P003', 'Chicken Burger', 1, 'chicken_burger.jpg', 450, 'Grilled chicken burger with lettuce and mayo', 2, 1, 1),
('P004', 'Beef Burger', 1, 'beef_burger.jpg', 850, 'Juicy beef burger with cheddar cheese', 2, 1, 1),
('P005', 'Caesar Salad', 1, 'caesar_salad.jpg', 490, 'Fresh romaine lettuce with Caesar dressing', 5, 1, 1),
('P006', 'Pasta Alfredo', 1, 'pasta_alfredo.jpg', 1199, 'Creamy Alfredo pasta with chicken', 4, 1, 1),
('P007', 'Veggie Wrap', 1, 'veggie_wrap.jpg', 580, 'Healthy wrap filled with fresh vegetables', 6, 1, 1),
('P008', 'Grilled Salmon', 1, 'grilled_salmon.jpg', 1299, 'Grilled salmon served with lemon butter', 8, 1, 1),
('P009', 'Tacos', 1, 'tacos.jpg', 750, 'Soft tacos filled with seasoned beef and veggies', 6, 1, 1),
('P010', 'Chocolate Cake', 1, 'chocolate_cake.jpeg', 1199, 'Rich chocolate cake with ganache topping', 7, 1, 1),
('P011', 'Biryani', 1, 'biryani.jpeg', 499, 'Traditional Pakistani rice dish with spices and chicken', 10, 1, 1),
('P012', 'Karahi Gosht', 1, 'karahi_gosht.jpeg', 1250, 'Spicy and flavorful mutton curry', 10, 1, 1),
('P013', 'Haleem', 1, 'haleem.jpg', 220, 'Thick and hearty stew made with lentils and meat', 10, 1, 1),
('P014', 'Chicken Tikka', 1, 'chicken_tikka.jpg', 450, 'Grilled chicken marinated in spices', 9, 1, 1),
('P015', 'Seekh Kebabs', 1, 'seekh_kebabs.jpg', 390, 'Minced meat kebabs grilled to perfection', 9, 1, 1),
('P016', 'Paya', 1, 'paya.jpeg', 390, 'Slow-cooked goat trotters curry', 10, 1, 1),
('P017', 'Nihari', 1, 'nihari.jpg', 450, 'Spicy beef stew cooked with aromatic spices', 10, 1, 1),
('P018', 'Chapli Kebab', 1, 'chapli_kebab.jpeg', 220, 'Fried minced meat patties with herbs and spices', 10, 1, 1),
('P019', 'Gol Gappay', 1, 'gol_gappay.png', 300, 'Crispy shells filled with spicy tamarind water', 10, 1, 1),
('P020', 'Kheer', 1, 'kheer.jpg', 180, 'Traditional Pakistani rice pudding dessert', 7, 1, 1);


INSERT INTO PermissionsCategory (PermissionModule, PermissionCategoryName)
VALUES 
('Warehouse','Role'),
('Warehouse', 'Item Category'),
('Warehouse', 'Item'),
('Warehouse', 'Vendor'),
('Warehouse', 'Branch'),
('Warehouse', 'Purchase'),
('Warehouse', 'Purchase Return'),
('Warehouse', 'Requisition'),
('Warehouse', 'Issue'),
('Warehouse', 'Stock Return'),
('Warehouse', 'Bank And Cash'),
('Warehouse', 'Payment Voucher'),
('Warehouse', 'Receipt Voucher'),
('Warehouse', 'User');



-- Insert into Permissions table
INSERT INTO Permissions (PermissionName, PermissionCategoryId)
VALUES 
('List', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Item Category')),
('Create', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Item Category')),
('Edit', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Item Category')),
('Delete', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Item Category')),

('List', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Item')),
('Create', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Item')),
('Edit', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Item')),
('Delete', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Item')),

('List', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Vendor')),
('Create', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Vendor')),
('Edit', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Vendor')),
('Delete', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Vendor')),

('List', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Branch')),
('Create', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Branch')),
('Edit', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Branch')),
('Delete', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Branch')),

('List', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Purchase')),
('Create', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Purchase')),
('Edit', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Purchase')),
('Delete', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Purchase')),

('List', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Purchase Return')),
('Create', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Purchase Return')),
('Edit', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Purchase Return')),
('Delete', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Purchase Return')),

('Status Update', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Requisition')),

('List', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Issue')),
('Create', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Issue')),
('Edit', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Issue')),
('Delete', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Issue')),

('List', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Stock Return')),
('Status Update', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Stock Return')),
('View', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Stock Return')),

('List', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Bank And Cash')),
('Create', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Bank And Cash')),
('Edit', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Bank And Cash')),
('Delete', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Bank And Cash')),

('List', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Payment Voucher')),
('Create', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Payment Voucher')),
('Edit', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Payment Voucher')),
('Delete', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Payment Voucher')),
('View PDF', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Payment Voucher')),

('List', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Receipt Voucher')),
('Create', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Receipt Voucher')),
('Edit', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Receipt Voucher')),
('Delete', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Receipt Voucher')),
('View PDF', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Receipt Voucher')),

('List', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'User')),
('Create', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'User')),
('Edit', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'User')),
('Delete', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'User')),

('List', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Role')),
('Create', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Role')),
('Edit', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Role')),
('Delete', (SELECT PermissionCategoryId FROM PermissionsCategory WHERE PermissionCategoryName = 'Role'));


-- Insert unique Permission Categories into PermissionsCategory table
INSERT INTO PermissionsCategory (PermissionModule, PermissionCategoryName)
SELECT DISTINCT 'Kitchen', CategoryName
FROM (VALUES
    ('Branch Item'),
    ('Branch Requisition'),
    ('Branch Issue'),
    ('Branch Stock Return'),
    ('Consume'),
    ('Wastage'),
    ('Product Category'),
    ('Product'),
    ('Order'),
    ('Order View'),
    ('Chef View'),
    ('Kitchen User'),
    ('Kitchen Role')
) AS Categories(CategoryName)
WHERE NOT EXISTS (
    SELECT 1 FROM PermissionsCategory pc WHERE pc.PermissionModule = 'Kitchen' AND pc.PermissionCategoryName = Categories.CategoryName
);

-- Insert permissions into Permissions table
INSERT INTO Permissions (PermissionName, PermissionCategoryId)
SELECT p.PermissionName, pc.PermissionCategoryId
FROM (
    VALUES
    ('List', 'Branch Item'),
    ('Create', 'Branch Item'),
    ('Edit', 'Branch Item'),
    ('Delete', 'Branch Item'),
    
    ('List', 'Branch Requisition'),
    ('Create', 'Branch Requisition'),
    ('Edit', 'Branch Requisition'),
    ('Delete', 'Branch Requisition'),
    
    ('List', 'Branch Issue'),
    ('View', 'Branch Issue'),
    ('Status Update', 'Branch Issue'),

    ('List', 'Branch Stock Return'),
    ('Create', 'Branch Stock Return'),
    ('Edit', 'Branch Stock Return'),
    ('Delete', 'Branch Stock Return'),
    
    ('List', 'Consume'),
    ('Create', 'Consume'),
    ('Edit', 'Consume'),
    ('Delete', 'Consume'),
    
    ('List', 'Wastage'),
    ('Create', 'Wastage'),
    ('Edit', 'Wastage'),
    ('Delete', 'Wastage'),
    
    ('List', 'Product Category'),
    ('Create', 'Product Category'),
    ('Edit', 'Product Category'),
    ('Delete', 'Product Category'),
    
    ('List', 'Product'),
    ('Create', 'Product'),
    ('Edit', 'Product'),
    ('Delete', 'Product'),
    
    ('List', 'Order'),
    ('Create', 'Order'),
    ('View', 'Order'),
    ('Status Update', 'Order'),
    
    ('View', 'Order View'),
    ('View', 'Chef View'),
    
    ('List', 'Kitchen User'),
    ('Create', 'Kitchen User'),
    ('Edit', 'Kitchen User'),
    ('Delete', 'Kitchen User'),
    
    ('List', 'Kitchen Role'),
    ('Create', 'Kitchen Role'),
    ('Edit', 'Kitchen Role'),
    ('Delete', 'Kitchen Role')
) AS p(PermissionName, PermissionCategory)
JOIN PermissionsCategory pc ON p.PermissionCategory = pc.PermissionCategoryName
WHERE pc.PermissionModule = 'Kitchen';


